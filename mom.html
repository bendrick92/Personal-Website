<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Happy Retirement!</title>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
		<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
		<style type="text/css">
			body {
				background-color: #623F99;
				font-family: 'Roboto Condensed', sans-serif;
                margin: 0;
                padding: 0;
			}
            #bodyBackground {
                width: 100%;
                height: 100%;
                position: absolute;
                object-fit: cover;
                z-index: 0;
            }
			#output {
				width: 80%;
				height: auto;
				position: absolute;
				top: 50%;
				margin-top: -6em;
                margin-right: 10%;
                margin-left: 10%;
				text-align: center;
				font-size: 2em;
				color: #EAAB66;
			}
				#countdown, #countup {
					font-size: 1.5em;
					font-weight: bold;
				}
                #countup {
                    color: #000000;
                }
		</style>
	</head>
	<body>
        <img id="bodyBackground" src="beach.jpg" style="display: none;" />
		<div id="output">
			<div id="countdownContainer">
                <p style="color: #ffffff;">
                    Hi, Mom and Dad!
                    <br>
                    <br>
                    Hang in there!  There's only...
                </p>
                <div id="countdown"></div>
                <p style="color: #ffffff;">
                    until retirement!
                </p>
            </div>
            <div id="countupContainer" style="display: none;">
                <div id="initMessage">
                    <p style="color: #ffffff;">
                        You did it!  You're retired!
                    </p>
                    <p style="font-size: 2em;">Congratulations!</p>
                </div>
                <div id="retiredMessage" style="display: none;">
                    <p style="color: #ffffff;">
                        You've now been retired for...
                    </p>
                    <div id="countup"></div>
                    <p style="color: #ffffff;">
                        Now get out there and enjoy it!
                    </p>
                </div>
            </div>
		</div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function () {
				getCountdown();
			});
			
			function getCountdown() {
				var countdown = $("#countdown");			
				var currentDateTime = new Date($.now());
                /*currentDateTime.setDate(currentDateTime.getDate() + 1);
                currentDateTime.setHours(currentDateTime.getHours() + 7);
                currentDateTime.setMinutes(currentDateTime.getMinutes() + 11);*/
				var endDateTime = new Date("January 29, 2016 16:30:00");
				var dateDiff = new Date(endDateTime - currentDateTime);
                if (dateDiff > 0) {
                    var dateDiffDays = dateDiff/1000/60/60/24;
						var dateDiffDaysRounded = Math.floor(dateDiffDays);
					var dateDiffHours = 24 * (dateDiffDays - dateDiffDaysRounded);
						var dateDiffHoursRounded = Math.floor(dateDiffHours);
					var dateDiffMinutes = 60 * (dateDiffHours - dateDiffHoursRounded);
						var dateDiffMinutesRounded = Math.floor(dateDiffMinutes);
					var dateDiffSeconds = 60 * (dateDiffMinutes - dateDiffMinutesRounded);
						var dateDiffSecondsRounded = Math.floor(dateDiffSeconds);
				    countdown.text(dateDiffDaysRounded + " days " + dateDiffHoursRounded + " hours " + dateDiffMinutesRounded + " minutes " + dateDiffSecondsRounded + " seconds");
				    setTimeout(getCountdown, 1000);
                }
                else {
                    triggerRetirement();
                }
			}
            
            function triggerRetirement() {
                var bodyBackground = $("#bodyBackground");
                var countdownContainer = $("#countdownContainer");
                var countupContainer = $("#countupContainer");
                var initMessage = $("#initMessage");
                var retiredMessage = $("#retiredMessage");
                
                countdownContainer.hide();
                countupContainer.fadeIn(function () {
                    bodyBackground.delay(5000).fadeIn(5000);
                    initMessage.delay(5000).fadeOut(3000);
                    retiredMessage.delay(8000).fadeIn(3000);
                    setTimeout(getCountup, 3000);
                }); 
            }
            
            function getCountup() {
                var countup = $("#countup");
				var currentDateTime = new Date($.now());
                /*currentDateTime.setDate(currentDateTime.getDate() + 1);
                currentDateTime.setHours(currentDateTime.getHours() + 7);
                currentDateTime.setMinutes(currentDateTime.getMinutes() + 11);*/
                var startDateTime = new Date("January 29, 2016, 16:30:01");
                var dateDiff = new Date(currentDateTime - startDateTime);
                if (dateDiff > 0) {
                    var dateDiffDays = dateDiff/1000/60/60/24;
						var dateDiffDaysRounded = Math.floor(dateDiffDays);
					var dateDiffHours = 24 * (dateDiffDays - dateDiffDaysRounded);
						var dateDiffHoursRounded = Math.floor(dateDiffHours);
					var dateDiffMinutes = 60 * (dateDiffHours - dateDiffHoursRounded);
						var dateDiffMinutesRounded = Math.floor(dateDiffMinutes);
					var dateDiffSeconds = 60 * (dateDiffMinutes - dateDiffMinutesRounded);
						var dateDiffSecondsRounded = Math.floor(dateDiffSeconds);
				    countup.text(dateDiffDaysRounded + " days " + dateDiffHoursRounded + " hours " + dateDiffMinutesRounded + " minutes " + dateDiffSecondsRounded + " seconds");
				    setTimeout(getCountup, 1000);
                }
            }
		</script>
	</body>
</html>